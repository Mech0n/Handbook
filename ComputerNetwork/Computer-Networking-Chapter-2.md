# Chapter 2

#### R1

Web：HTTP；

文件传输：FTP； 

远程登录：Telnet； 

电子邮件：SMTP； 

比特流文件共享：BitTorrent协议

#### R2

网络体系结构是指将通信过程组织为多层（例如，五层互联网体系结构）。 

应用程序体系结构是由应用程序开发人员设计的，并规定了如何在各种端系统上组织该应用程序。（例如，客户-服务器体系结构或对等体系结构P2P）。

#### R3

发起通信的进程是客户端； 等待联系的进程是服务器。

#### R4

在P2P文件共享应用程序中，接收文件的对等点通常是客户端，而发送文件的对等点通常是服务器。

#### R5

目标主机的IP地址和目标进程的套接字端口号。

#### R6

选择UDP。 使用UDP，可以在一个往返时间（RTT）中完成事务，即客户端将事务请求发送到UDP套接字，服务器将答复发送回客户端的UDP套接字。 使用TCP，最少需要两个RTT，一个用于建立TCP连接，另一个用于客户端发送请求，以及用于服务器发送回信。

#### R7

这样的示例之一就是使用Google文档进行远程文字处理。 但是，由于Google文档在Internet上运行（使用TCP），因此不提供计时保证。

​																															----来自文档

#### R8

a）可靠数据传输
  TCP在客户端和服务器之间提供了可靠的字节流，但UDP不能。
b）保证一定的吞吐量值
  都没有
c）保证将在指定的时间内交付数据
  都没有
d）机密性（通过加密）
  都没有

​																															----来自文档

#### R9

SSL在应用程序层运行。

SSL套接字从应用程序层获取未加密的数据，对其进行加密，然后将其传递给TCP套接字。 如果应用程序开发人员希望使用SSL增强UDP，则必须在应用程序中包含SSL代码。

#### R10

如果两个通信实体在相互发送数据之前需要交换控制数据包，则协议使用握手协议。 

#### R11

与这些协议相关的应用程序要求所有应用程序数据分组以正确的顺序接收且没有间隙。

 TCP提供此服务，而UDP不提供。

#### R12

当用户首次访问该站点时，服务器将创建一个唯一的标识号，在其后端数据库中创建一个条目，并将此标识号作为cookie编号返回。 此Cookie编号存储在用户的主机上，并由浏览器管理。 在随后的每次访问（和购买）期间，浏览器都会将Cookie编号发送回站点。 因此，站点知道该用户（更确切地说是该浏览器）何时访问该站点。

#### R13

Web缓存可以将所需的内容“更近地”带给用户，甚至可以带到用户主机所连接的同一LAN。 Web缓存可以减少所有对象（甚至是未缓存的对象）的延迟，因为缓存可以减少链接上的流量。

#### R15

几种流行的消息传递应用程序：WhatsApp，Facebook Messenger，微信和Snapchat。 

这些应用程序使用与SMS不同的协议。

> **短信息服务**（英语：**S**hort **M**essage **S**ervice，缩写：**SMS**；有时也称为**信息**、**短信息**、**文字消息**，此服务亦有许多英语的俗称如SMSes、text messages、messages或甚至于texts和txts）是[移动电话](https://zh.wikipedia.org/wiki/行動電話)服务的一种。短信服务最早是在[GSM](https://zh.wikipedia.org/wiki/GSM)系统手机上引入的，现在几乎在任何手机系统上都能通用，如[4G](https://zh.wikipedia.org/wiki/4G)手机。																						---Wiki

#### R16

该邮件首先通过HTTP从Alice的主机发送到她的邮件服务器。 然后，Alice的邮件服务器通过SMTP将邮件发送到Bob的邮件服务器。 然后，Bob通过POP3将邮件从邮件服务器传输到主机。

#### R17

截取自文档中的报文

![](https://i.loli.net/2019/11/19/NJUqfXR4d3nVwbO.png)

- Received: 此标头字段指示SMTP服务器发送和接收包括相应时间戳的邮件消息的顺序。
- Message-id: Message-id是邮件系统在首次创建邮件时分配的唯一字符串。
- From:这表示邮件发件人的电子邮件地址。在给定的示例中，发件人为“ prithuladhungel@hotmail.com”
- To: 此字段指示邮件收件人的电子邮件地址。在这个例子中收件人是“ prithula@yahoo.com”
- Subject: 给出了邮件的主题（如果发件人指定了任何主题）。例如，发件人指定的主题是“Test mail”
- Date: 发件人发送邮件的日期和时间。
- Mime-version: 用于邮件的MIME版本。
- Content-type: 邮件正文中内容的类型。
- Return-Path: 这指定在以下情况下将邮件发送到的电子邮件地址：
  - 该邮件的收件人希望回复发件人。
  - 发件人的 邮件服务器，用于退回mailer-daemon错误的无法传递的邮件
    消息。

#### R18

通过下载和删除，在用户从POP服务器检索其消息之后，该消息将被删除。 这给一些用户带来了一个问题，他们可能想从许多不同的机器（办公PC，家用PC等）访问消息。 

在下载并保留配置中，用户检索消息后不会删除消息。 这也可能很不方便，因为每次用户从新计算机上检索存储的消息时，所有未删除的消息都将传输到新计算机上（包括非常旧的消息）。

#### R19

可以。

MX类型记录用于将邮件服务器的主机名映射到其IP地址。

#### R20

也许可以，但是如果是用邮件账户发送的邮件，则只能看到账户地址。

#### R21

Bob不必向Alice提供块。 

Alice必须在Bob的前4名邻居中，Bob才能向她发送数据块。 即使Alice在30秒的间隔内向Bob提供了块，也可能不会发生这种情况。

#### R22

回想一下，在BitTorrent中，对等方选择一个随机的对等方，并在短时间内主动地取消对等方。 因此，Alice将被邻居之一主动地解开连接，在此前的这段时间内，她将从邻居那里收到文件块。

#### R23

P2P文件共享系统中的覆盖网络由参与文件共享系统的节点和节点之间的逻辑链接组成。

 如果A和B之间存在半永久的TCP连接，则从节点A到节点B之间存在逻辑链接（用图论术语来说是“边缘”）。

覆盖网络不包括路由器。

#### R24

一种服务器放置理念被称为“Enter Deep”，通过在全球接入ISP中部署服务器集群，深入到互联网服务提供商的接入网络中。目标是减少延迟并增加终端用户和CDN服务器之间的吞吐量。

另一种理念是“Bring Home”，通过在少量站点上构建大型CDN服务器集群并将这些服务器集群放置在IXPs (Internet交换点)中，将ISP Bring Home。与深入设计理念相比，这通常会带来更低的维护和管理成本。

#### R25

除了与网络相关的因素外，还有一些重要的因素需要考虑，例如负载平衡（客户端不应定向到过载群集），昼夜影响，网络中DNS服务器之间的差异，很少访问的视频的可用性有限以及减轻因流行视频内容而引起的热点的需求。

另一个要考虑的因素是ISP的交付成本-可以选择群集，以便使用特定的ISP来承载CDN到客户端的流量，同时要考虑ISP与群集运营商之间合同关系中的不同成本结构。

#### R26

对于UDP服务器，没有欢迎套接字，并且来自不同客户端的所有数据都通过该套接字进入服务器。 

对于TCP服务器，有一个欢迎套接字，并且每次客户端启动与服务器的连接时，都会创建一个新的连接套接字。 因此，为了支持n个同时连接，服务器将需要n + 1个套接字。

#### R27

对于TCP应用程序，客户端一旦执行，它将尝试启动与服务器的TCP连接。 如果TCP服务器未运行，则客户端将无法建立连接。 

对于UDP应用程序，客户端不会在执行后立即立即启动连接（或尝试与UDP服务器通信），客户端等待服务器发送发送数据。

#### P1

a) F 

b) T 

c) F 

d) F 

e) F

#### P7

获得IP地址的总时间为$RTT_1 + RTT_2 +...+ RTT_n$

一旦知道IP地址，就会经过$RTT_0$来建立TCP连接，并且经过另一个$RTT_0$来请求和接收对象。 总响应时间为$2RTT_0 + RTT_1 + RTT_2 +...+ RTT_n$

#### P8

a)$R T T_{1}+\cdots+R T T_{n}+2 R T T_{o}+8 \cdot 2 R T T_{o}=18 R T T_{o}+R T T_{1}+\cdots+R T T_{n}$

b)$$
\begin{array}{l}{R T T_{1}+\cdots+R T T_{n}+2 R T T_{o}+2 \cdot 2 R T T_{o}} \\ {=6 R T T_{o}+R T T_{1}+\cdots+R T T_{n}}\end{array}
$$

c)流水线持久连接。 这是HTTP的默认模式。

$R T T_{1}+\cdots+R T T_{n}+2 R T T_{o}+R T T_{o}=3 R T T_{o}+R T T_{1}+\cdots+R T T_{n}$

持久连接，无流水线，无需并行连接。

$R T T_{1}+\cdots+R T T_{n}+2 R T T_{o}+8 R T T_{o}=10 R T T_{o}+R T T_{1}+\cdots+R T T_{n}$

#### P15

MTA代表邮件传输代理。 主机将邮件发送到MTA。 然后，该消息将按照一系列MTA到达收件人的邮件阅读器。 我们看到该垃圾邮件遵循一系列MTA。 诚实的MTA应该报告它在何处收到邮件。 

请注意，在此消息中，“ asusus-4b96（[58.88.21.177]）”未从接收电子邮件的位置报告。 由于我们假设只有发起人是不诚实的，因此

“ asusu-4b96（[58.88.21.177]）”必须是发起人。

